# ==========================================
# PRODUCCIÓN VPS - DropTools
# ==========================================
# ⚠️ IMPORTANTE: Este archivo contiene configuraciones sensibles.
# NO subir a Git. Mantener en el servidor únicamente.

# ========================================
# 1. BASE DE DATOS (PostgreSQL)
# ========================================
POSTGRES_DB=droptools_db
POSTGRES_USER=droptools_admin
POSTGRES_PASSWORD=CAMBIAR_POR_CONTRASEÑA_SUPER_SEGURA_2026  # ⚠️ CAMBIAR OBLIGATORIO
POSTGRES_HOST=db
POSTGRES_PORT=5432
POSTGRES_INITDB_ARGS=--encoding=UTF-8 --lc-collate=C --lc-ctype=C
LC_ALL=C.UTF-8
LANG=C.UTF-8

# ========================================
# 2. DJANGO (Configuración de Producción)
# ========================================
DEBUG=False  # ⚠️ NUNCA usar True en producción
SECRET_KEY=GENERAR_CLAVE_SECRETA_SUPER_LARGA_Y_ALEATORIA_AQUI  # ⚠️ CAMBIAR OBLIGATORIO
# Clave dedicada para cifrado reversible de credenciales Dropi (obligatoria).
# Debe ser distinta a SECRET_KEY para permitir rotaciones independientes.
DROPI_PASSWORD_ENCRYPTION_KEY=GENERAR_CLAVE_DIFERENTE_PARA_DROPI  # ⚠️ CAMBIAR OBLIGATORIO
DJANGO_SETTINGS_MODULE=droptools_backend.settings

# Hosts permitidos (separados por coma)
# Incluir: tu dominio, IP del VPS, localhost
ALLOWED_HOSTS=droptools.cloud,www.droptools.cloud,localhost

# ========================================
# 3. CREDENCIALES EXTERNAS
# ========================================

# 3.1 Dropi (Proveedor de Dropshipping)
DROPI_EMAIL=tu_correo_dropi@ejemplo.com
DROPI_PASSWORD=REEMPLAZAR_POR_PASSWORD_SEGURO

# 3.2 Meta Ads Library (Facebook/Instagram)
META_ADS_TOKEN=TU_TOKEN_META_ADS_LIBRARY_AQUI  # ⚠️ VERIFICAR VIGENCIA

# ========================================
# 4. SERVICIOS AUXILIARES
# ========================================

# Modo headless para Selenium (siempre True en servidor)
HEADLESS_MODE=True

# pgAdmin (Gestión de Base de Datos)
PGADMIN_DEFAULT_EMAIL=admin@droptools.com
PGADMIN_DEFAULT_PASSWORD=CAMBIAR_CONTRASEÑA_PGADMIN_SEGURA  # ⚠️ CAMBIAR OBLIGATORIO

# ========================================
# 5. RUTAS Y CACHE
# ========================================

# HuggingFace (Modelos de IA)
HF_HOME=/app/cache_huggingface

# Datos crudos (JSONL)
RAW_DIR=/app/raw_data

# ========================================
# 6. CONFIGURACIÓN DE PYTHON
# ========================================

# Logs en tiempo real (no buffering)
PYTHONUNBUFFERED=1

# ========================================
# 7. CONFIGURACIÓN DE SEGURIDAD (Opcional)
# ========================================

# CORS (Frontend permitidos)
CORS_ALLOWED_ORIGINS=https://droptools.cloud,https://www.droptools.cloud

# Google OAuth (producción): en Google Cloud añadir https://droptools.cloud y https://droptools.cloud/auth/google/callback
GOOGLE_REDIRECT_URI=https://droptools.cloud/auth/google/callback

# Auth por correo (verificación + reset)
FRONTEND_BASE_URL=https://droptools.cloud
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.sendgrid.net
EMAIL_PORT=587
EMAIL_HOST_USER=apikey
EMAIL_HOST_PASSWORD=CAMBIAR_PASSWORD_SMTP
EMAIL_USE_TLS=True
DEFAULT_FROM_EMAIL=no-reply@droptools.cloud
SERVER_EMAIL=no-reply@droptools.cloud
VERIFY_EMAIL_EXPIRY_SECONDS=86400
RESET_PASSWORD_EXPIRY_SECONDS=3600
THROTTLE_REGISTER_RATE=8/hour
THROTTLE_PASSWORD_RESET_REQUEST_RATE=6/hour
THROTTLE_LOGIN_RATE=20/hour
THROTTLE_VERIFY_EMAIL_RATE=30/hour
THROTTLE_PASSWORD_RESET_CONFIRM_RATE=12/hour

# Celery/Redis (requerido para reporter en producción)
REDIS_PASSWORD=CAMBIAR_PASSWORD_REDIS
CELERY_BROKER_URL=redis://:CAMBIAR_PASSWORD_REDIS@redis:6379/0
CELERY_RESULT_BACKEND=redis://:CAMBIAR_PASSWORD_REDIS@redis:6379/0
FLOWER_BASIC_AUTH=admin:CAMBIAR_PASSWORD_FLOWER

# ========================================
# NOTAS IMPORTANTES:
# ========================================
# 
# 1. Generar SECRET_KEY segura:
#    python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
#
# 2. Verificar tokens de APIs externas:
#    - Meta Ads Token: https://developers.facebook.com/tools/accesstoken/
#    - Dropi: Verificar que las credenciales sean correctas
#
# 3. Configurar firewall (UFW):
#    sudo ufw allow 22/tcp   # SSH
#    sudo ufw allow 80/tcp   # HTTP
#    sudo ufw allow 443/tcp  # HTTPS
#    sudo ufw enable
#
# 4. Backups automáticos:
#    Configurar cron para ejecutar scripts/backup_db.sh diariamente
#
# 5. Monitoreo:
#    - Portainer: http://localhost:9000
#    - Logs: docker compose logs -f
#    - Recursos: docker stats
#
# ========================================
